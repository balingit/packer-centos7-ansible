{
  "variables":
  {
    "installer_iso": "../Downloads/CentOS-7-x86_64-DVD-1804.iso",
	"installer_checksum": "660aab9894136872770ecb6e1e370c08",	
	"disk_size": "8192",
	"box_basename": "centos7"
  },
  "builders":[
    {
	  "type": "virtualbox-iso",
	  "guest_os_type": "RedHat_64",
	  "iso_url": "{{user `installer_iso`}}",
	  "iso_checksum": "{{user `installer_checksum`}}",
	  "iso_checksum_type": "md5",	  
	  "disk_size": "{{ user `disk_size`}}",
	  "hard_drive_interface": "sata",
	  "ssh_username": "vagrant",
	  "ssh_password": "vagrant",
	  "ssh_timeout": "10000s",
	  "shutdown_command": "echo 'vagrant' | sudo -S /sbin/halt -h -p",
	  "http_directory": "http",	  
	  "boot_command":
	  [
	    "<tab> text ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/ks.cfg<enter><wait>"
	  ]
    }
  ],
  "provisioners":[
    {
	  "type": "shell",
	  "execute_command": "echo 'vagrant' | {{.Vars}} sudo -S -E bash -eux '{{.Path}}'",
	  "script": "scripts/ansible.sh"
    },
	{
	  "type": "ansible-local",
	  "playbook_file": "main.yml"
	},
	{
	  "type": "shell",
	  "execute_command": "echo 'vagrant' | {{.Vars}} sudo -S -E bash -eux '{{.Path}}'",
	  "script": "scripts/cleanup.sh"
    }	
  ],
  "post-processors":[
    {
	  "type": "vagrant",
	  "output": "{{user `box_basename`}}.{{.Provider}}.box"
	}
  ]
}